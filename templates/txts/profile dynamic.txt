<div class="profile-disp">
    {% extends "layout.html" %}
</div>

{% block title %}Profile{% endblock %}

{% block main %}

<section class="profile" id="profile">
    <div class="wrapper">
        {% block side %}
        <aside class="profile-sidebar">
            <div class="d-flex">
                <button class="profile-toggle-btn" type="button">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="profile-sidebar-logo ms-3 mt-2">
                    <a href="#"><img class="shadow-lg" src="{{ profile.image }}" alt="profile photo"></a>
                </div>
            </div>
            <ul class="profile-sidebar-nav">
                <li class="profile-sidebar-item">
                    <div class="profile-sidebar-text">
                        <h6>{{ profile.name }}</h6>
                    </div>
                </li>
                <li class="profile-sidebar-item">
                    <div class="profile-sidebar-text">
                        <p>{{ profile.intro }}</p>
                    </div>
                </li>
                <li class="profile-sidebar-item">
                    <div class="profile-sidebar-text d-flex">
                        <i class="fa-solid fa-location-dot me-3"></i>
                        <h6>{{ profile.location }}</h6>
                    </div>
                </li>
                <li class="profile-sidebar-item">
                    <a href="#reviews" class="profile-sidebar-link">
                        <div class="ratings">
                            {% for i in range({{ profile.rating }}) %}
                            <i class="fa-solid fa-star"></i>
                            {% endfor %}
                            <p> {{ profile.reviews }} reviews</p>
                        </div>
                    </a>
                </li>
                <li class="profile-sidebar-item">
                    <a href="{% if isMe %}
                                /editProfile
                             {% else %}
                                /SendRequest
                             {% endif %}" class="profile-sidebar-link">
                        <i class="fa-solid fa-pen-to-square"></i>
                        <span>{% if isMe %}Edit{% else %}Send Request{% endif %}</span>
                    </a>
                </li>
            </ul>
            <div class="profile-sidebar-footer">
                <a href="" class="profile-sidebar-link">
                    <i class="fas fa-right-from-bracket"></i>
                    <span>{% if isMe %}Logout{% else %}Login{% endif %}</span>
                </a>
            </div>
        </aside>
        {% endblock %}

        <!--MAIN CONTENT-->
        <div class="profile-main">
            <section class="menu shadow-lg pt-3" id="profile-menu">
                <div class="title text-center">
                    <h2>Offered Dishes</h2>
                    <p>Lorem ipsum dolor sit amet.</p>
                    {% if isMe %}<button class="btn btn-primary" type="submit" href="/addMeal"><i
                            class="fa-solid fa-plus"></i></button>{% endif %}
                </div>
                <div class="container form-container">
                    <form class="form my-3 search-form d-flex">
                        <input class="form-control mr-2 text-center search-for" type="search" placeholder="Search"
                            aria-label="Search">
                        <button class="btn btn-outline-success btn-search my-2" type="submit">Search</button>
                    </form>
                </div>
                <div id="menu-carousel" class="carousel" data-ride="carousel" data-interval="false">
                    <div class="carousel-inner">
                        {% for mealCard in profile.meals %}
     <div class="carousel-item menu-item meal-item">
        <div class="card  shadow-lg">
            <div class="img-wrapper"><img src="{{ mealCard.img }}" class="card-img-top"
                    alt="Card image cap"></div>
            <div class="card-body">
                <h5 class="card-title">{{ mealCard.title }}</h5>
                <p class="card-text">{{ mealCard.intro }}</p>\
                <h6>Price</h6>
                        <p class="card-text">${{ mealCard.price }}</p>
                <div class="ratings">
                    {% for i in range({{ mealCard.rating }}) %}
                    <i class="fa-solid fa-star"></i>
                    {% endfor %}
                    <p> {{ reviews }} reviews</p>
                </div>
                </div>
                <div class="other-details">
                    <a class="btn nav-link text-start" href="{{ mealCard.chef.link }}">{{ mealCard.chef.name }}<i
                            class="fa-solid fa-arrow-right"></i></a>
                </div>
                <a href="/meal" class="btn btn-outline-primary">More Details</a>
                <a href="
                    {% if isLoggedin %}
                        /meal
                    {% else %}
                        /login
                    {% endif %}" class="btn btn-primary">Order Now!</a>
            </div>
        </div>
    </div>
    {% endfor %}
                        
                    <a class="carousel-control-prev" href="#menu-prev" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#menu-next" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </section>

            <section class="menu shadow-lg pt-3" id="reviews">
                <div class="title text-center">
                    <div class="title text-center">
                        <h2>Customers Reviews</h2>
                        <p>Lorem ipsum dolor sit amet.</p>
                        {% if !isMe %}<button class="btn btn-primary mb-3" type="submit" href="/addMeal"><i
                                class="fa-solid fa-plus"></i></button>{% endif %}
                    </div>
                </div>
                <div id="menu-carousel" class="carousel" data-ride="carousel" data-interval="false">
                    <div class="carousel-inner">
                        {% for review in profile.reviews%}
                        <div class="carousel-item card bg-light mb-3" style="max-width: 18rem;">
                            <div class="card-header">{{ review.reviewer.name }}</div>
                            <div class="card-body">
                                <h5 class="card-title">{{ review.meal.name }}</h5>
                                <p class="card-text">{{ review.content}}</p>
                                <div class="ratings">
                                    {% for i in range({{ review.rating }}) %}
                                    <i class="fa-solid fa-star"></i>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#menu-prev" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#menu-next" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </section>
        </div>
    </div>
</section>

{% endblock %}